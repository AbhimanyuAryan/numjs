/*! num4js#0.5.0 */
!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,a.nj=n()}}(function(){return function n(a,c,f){function i(r,t){if(!c[r]){if(!a[r]){var u="function"==typeof require&&require;if(!t&&u)return u(r,!0);if(o)return o(r,!0);var v=new Error("Cannot find module '"+r+"'");throw v.code="MODULE_NOT_FOUND",v}var X=c[r]={exports:{}};a[r][0].call(X.exports,function(n){var c=a[r][1][n];return i(c?c:n)},X,X.exports,n,a,c,f)}return c[r].exports}for(var o="function"==typeof require&&require,r=0;r<f.length;r++)i(f[r]);return i}({1:[function(n,a,c){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(n){"use strict";function a(n){var a=n.charCodeAt(0);return a===r||a===b?62:a===t||a===d?63:u>a?-1:u+10>a?a-u+26+26:X+26>a?a-X:v+26>a?a-v+26:void 0}function c(n){function c(n){v[b++]=n}var f,i,r,t,u,v;if(n.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=n.length;u="="===n.charAt(X-2)?2:"="===n.charAt(X-1)?1:0,v=new o(3*n.length/4-u),r=u>0?n.length-4:n.length;var b=0;for(f=0,i=0;r>f;f+=4,i+=3)t=a(n.charAt(f))<<18|a(n.charAt(f+1))<<12|a(n.charAt(f+2))<<6|a(n.charAt(f+3)),c((16711680&t)>>16),c((65280&t)>>8),c(255&t);return 2===u?(t=a(n.charAt(f))<<2|a(n.charAt(f+1))>>4,c(255&t)):1===u&&(t=a(n.charAt(f))<<10|a(n.charAt(f+1))<<4|a(n.charAt(f+2))>>2,c(t>>8&255),c(255&t)),v}function i(n){function a(n){return f.charAt(n)}function c(n){return a(n>>18&63)+a(n>>12&63)+a(n>>6&63)+a(63&n)}var i,o,r,t=n.length%3,u="";for(i=0,r=n.length-t;r>i;i+=3)o=(n[i]<<16)+(n[i+1]<<8)+n[i+2],u+=c(o);switch(t){case 1:o=n[n.length-1],u+=a(o>>2),u+=a(o<<4&63),u+="==";break;case 2:o=(n[n.length-2]<<8)+n[n.length-1],u+=a(o>>10),u+=a(o>>4&63),u+=a(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),t="/".charCodeAt(0),u="0".charCodeAt(0),v="a".charCodeAt(0),X="A".charCodeAt(0),b="-".charCodeAt(0),d="_".charCodeAt(0);n.toByteArray=c,n.fromByteArray=i}("undefined"==typeof c?this.base64js={}:c)},{}],2:[function(n,a,c){"use strict";"use restrict";function f(n){var a=32;return n&=-n,n&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}var i=32;c.INT_BITS=i,c.INT_MAX=2147483647,c.INT_MIN=-1<<i-1,c.sign=function(n){return(n>0)-(0>n)},c.abs=function(n){var a=n>>i-1;return(n^a)-a},c.min=function(n,a){return a^(n^a)&-(a>n)},c.max=function(n,a){return n^(n^a)&-(a>n)},c.isPow2=function(n){return!(n&n-1||!n)},c.log2=function(n){var a,c;return a=(n>65535)<<4,n>>>=a,c=(n>255)<<3,n>>>=c,a|=c,c=(n>15)<<2,n>>>=c,a|=c,c=(n>3)<<1,n>>>=c,a|=c,a|n>>1},c.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},c.popCount=function(n){return n-=n>>>1&1431655765,n=(858993459&n)+(n>>>2&858993459),16843009*(n+(n>>>4)&252645135)>>>24},c.countTrailingZeros=f,c.nextPow2=function(n){return n+=0===n,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},c.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},c.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var o=new Array(256);!function(n){for(var a=0;256>a;++a){var c=a,f=a,i=7;for(c>>>=1;c;c>>>=1)f<<=1,f|=1&c,--i;n[a]=f<<i&255}}(o),c.reverse=function(n){return o[255&n]<<24|o[n>>>8&255]<<16|o[n>>>16&255]<<8|o[n>>>24&255]},c.interleave2=function(n,a){return n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),n|a<<1},c.deinterleave2=function(n,a){return n=n>>>a&1431655765,n=858993459&(n|n>>>1),n=252645135&(n|n>>>2),n=16711935&(n|n>>>4),n=65535&(n|n>>>16),n<<16>>16},c.interleave3=function(n,a,c){return n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),n|=a<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),n|c<<2},c.deinterleave3=function(n,a){return n=n>>>a&1227133513,n=3272356035&(n|n>>>2),n=251719695&(n|n>>>4),n=4278190335&(n|n>>>8),n=1023&(n|n>>>16),n<<22>>22},c.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>f(n)+1}},{}],3:[function(n,a,c){(function(a){"use strict";function f(){function n(){}try{var a=new Uint8Array(1);return a.foo=function(){return 42},a.constructor=n,42===a.foo()&&a.constructor===n&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(c){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(n){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof n?r(this,n):"string"==typeof n?t(this,n,arguments.length>1?arguments[1]:"utf8"):u(this,n)):arguments.length>1?new o(n,arguments[1]):new o(n)}function r(n,a){if(n=h(n,0>a?0:0|j(a)),!o.TYPED_ARRAY_SUPPORT)for(var c=0;a>c;c++)n[c]=0;return n}function t(n,a,c){("string"!=typeof c||""===c)&&(c="utf8");var f=0|l(a,c);return n=h(n,f),n.write(a,c),n}function u(n,a){if(o.isBuffer(a))return v(n,a);if(Y(a))return X(n,a);if(null==a)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(a.buffer instanceof ArrayBuffer)return b(n,a);if(a instanceof ArrayBuffer)return d(n,a)}return a.length?e(n,a):g(n,a)}function v(n,a){var c=0|j(a.length);return n=h(n,c),a.copy(n,0,0,c),n}function X(n,a){var c=0|j(a.length);n=h(n,c);for(var f=0;c>f;f+=1)n[f]=255&a[f];return n}function b(n,a){var c=0|j(a.length);n=h(n,c);for(var f=0;c>f;f+=1)n[f]=255&a[f];return n}function d(n,a){return o.TYPED_ARRAY_SUPPORT?(a.byteLength,n=o._augment(new Uint8Array(a))):n=b(n,new Uint8Array(a)),n}function e(n,a){var c=0|j(a.length);n=h(n,c);for(var f=0;c>f;f+=1)n[f]=255&a[f];return n}function g(n,a){var c,f=0;"Buffer"===a.type&&Y(a.data)&&(c=a.data,f=0|j(c.length)),n=h(n,f);for(var i=0;f>i;i+=1)n[i]=255&c[i];return n}function h(n,a){o.TYPED_ARRAY_SUPPORT?(n=o._augment(new Uint8Array(a)),n.__proto__=o.prototype):(n.length=a,n._isBuffer=!0);var c=0!==a&&a<=o.poolSize>>>1;return c&&(n.parent=Z),n}function j(n){if(n>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|n}function k(n,a){if(!(this instanceof k))return new k(n,a);var c=new o(n,a);return delete c.parent,c}function l(n,a){"string"!=typeof n&&(n=""+n);var c=n.length;if(0===c)return 0;for(var f=!1;;)switch(a){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return Q(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return T(n).length;default:if(f)return Q(n).length;a=(""+a).toLowerCase(),f=!0}}function m(n,a,c){var f=!1;if(a=0|a,c=void 0===c||c===1/0?this.length:0|c,n||(n="utf8"),0>a&&(a=0),c>this.length&&(c=this.length),a>=c)return"";for(;;)switch(n){case"hex":return E(this,a,c);case"utf8":case"utf-8":return A(this,a,c);case"ascii":return C(this,a,c);case"binary":return D(this,a,c);case"base64":return z(this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,a,c);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),f=!0}}function p(n,a,c,f){c=Number(c)||0;var i=n.length-c;f?(f=Number(f),f>i&&(f=i)):f=i;var o=a.length;if(o%2!==0)throw new Error("Invalid hex string");f>o/2&&(f=o/2);for(var r=0;f>r;r++){var t=parseInt(a.substr(2*r,2),16);if(isNaN(t))throw new Error("Invalid hex string");n[c+r]=t}return r}function q(n,a,c,f){return U(Q(a,n.length-c),n,c,f)}function s(n,a,c,f){return U(R(a),n,c,f)}function w(n,a,c,f){return s(n,a,c,f)}function x(n,a,c,f){return U(T(a),n,c,f)}function y(n,a,c,f){return U(S(a,n.length-c),n,c,f)}function z(n,a,c){return 0===a&&c===n.length?V.fromByteArray(n):V.fromByteArray(n.slice(a,c))}function A(n,a,c){c=Math.min(n.length,c);for(var f=[],i=a;c>i;){var o=n[i],r=null,t=o>239?4:o>223?3:o>191?2:1;if(c>=i+t){var u,v,X,b;switch(t){case 1:128>o&&(r=o);break;case 2:u=n[i+1],128===(192&u)&&(b=(31&o)<<6|63&u,b>127&&(r=b));break;case 3:u=n[i+1],v=n[i+2],128===(192&u)&&128===(192&v)&&(b=(15&o)<<12|(63&u)<<6|63&v,b>2047&&(55296>b||b>57343)&&(r=b));break;case 4:u=n[i+1],v=n[i+2],X=n[i+3],128===(192&u)&&128===(192&v)&&128===(192&X)&&(b=(15&o)<<18|(63&u)<<12|(63&v)<<6|63&X,b>65535&&1114112>b&&(r=b))}}null===r?(r=65533,t=1):r>65535&&(r-=65536,f.push(r>>>10&1023|55296),r=56320|1023&r),f.push(r),i+=t}return B(f)}function B(n){var a=n.length;if($>=a)return String.fromCharCode.apply(String,n);for(var c="",f=0;a>f;)c+=String.fromCharCode.apply(String,n.slice(f,f+=$));return c}function C(n,a,c){var f="";c=Math.min(n.length,c);for(var i=a;c>i;i++)f+=String.fromCharCode(127&n[i]);return f}function D(n,a,c){var f="";c=Math.min(n.length,c);for(var i=a;c>i;i++)f+=String.fromCharCode(n[i]);return f}function E(n,a,c){var f=n.length;(!a||0>a)&&(a=0),(!c||0>c||c>f)&&(c=f);for(var i="",o=a;c>o;o++)i+=P(n[o]);return i}function F(n,a,c){for(var f=n.slice(a,c),i="",o=0;o<f.length;o+=2)i+=String.fromCharCode(f[o]+256*f[o+1]);return i}function G(n,a,c){if(n%1!==0||0>n)throw new RangeError("offset is not uint");if(n+a>c)throw new RangeError("Trying to access beyond buffer length")}function H(n,a,c,f,i,r){if(!o.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");if(a>i||r>a)throw new RangeError("value is out of bounds");if(c+f>n.length)throw new RangeError("index out of range")}function I(n,a,c,f){0>a&&(a=65535+a+1);for(var i=0,o=Math.min(n.length-c,2);o>i;i++)n[c+i]=(a&255<<8*(f?i:1-i))>>>8*(f?i:1-i)}function J(n,a,c,f){0>a&&(a=4294967295+a+1);for(var i=0,o=Math.min(n.length-c,4);o>i;i++)n[c+i]=a>>>8*(f?i:3-i)&255}function K(n,a,c,f,i,o){if(a>i||o>a)throw new RangeError("value is out of bounds");if(c+f>n.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function L(n,a,c,f,i){return i||K(n,a,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(n,a,c,f,23,4),c+4}function M(n,a,c,f,i){return i||K(n,a,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(n,a,c,f,52,8),c+8}function N(n){if(n=O(n).replace(nn,""),n.length<2)return"";for(;n.length%4!==0;)n+="=";return n}function O(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function P(n){return 16>n?"0"+n.toString(16):n.toString(16)}function Q(n,a){a=a||1/0;for(var c,f=n.length,i=null,o=[],r=0;f>r;r++){if(c=n.charCodeAt(r),c>55295&&57344>c){if(!i){if(c>56319){(a-=3)>-1&&o.push(239,191,189);continue}if(r+1===f){(a-=3)>-1&&o.push(239,191,189);continue}i=c;continue}if(56320>c){(a-=3)>-1&&o.push(239,191,189),i=c;continue}c=(i-55296<<10|c-56320)+65536}else i&&(a-=3)>-1&&o.push(239,191,189);if(i=null,128>c){if((a-=1)<0)break;o.push(c)}else if(2048>c){if((a-=2)<0)break;o.push(c>>6|192,63&c|128)}else if(65536>c){if((a-=3)<0)break;o.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((a-=4)<0)break;o.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return o}function R(n){for(var a=[],c=0;c<n.length;c++)a.push(255&n.charCodeAt(c));return a}function S(n,a){for(var c,f,i,o=[],r=0;r<n.length&&!((a-=2)<0);r++)c=n.charCodeAt(r),f=c>>8,i=c%256,o.push(i),o.push(f);return o}function T(n){return V.toByteArray(N(n))}function U(n,a,c,f){for(var i=0;f>i&&!(i+c>=a.length||i>=n.length);i++)a[i+c]=n[i];return i}var V=n("base64-js"),W=n("ieee754"),Y=n("isarray");c.Buffer=o,c.SlowBuffer=k,c.INSPECT_MAX_BYTES=50,o.poolSize=8192;var Z={};o.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:f(),o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(n){return!(null==n||!n._isBuffer)},o.compare=function(n,a){if(!o.isBuffer(n)||!o.isBuffer(a))throw new TypeError("Arguments must be Buffers");if(n===a)return 0;for(var c=n.length,f=a.length,i=0,r=Math.min(c,f);r>i&&n[i]===a[i];)++i;return i!==r&&(c=n[i],f=a[i]),f>c?-1:c>f?1:0},o.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(n,a){if(!Y(n))throw new TypeError("list argument must be an Array of Buffers.");if(0===n.length)return new o(0);var c;if(void 0===a)for(a=0,c=0;c<n.length;c++)a+=n[c].length;var f=new o(a),i=0;for(c=0;c<n.length;c++){var r=n[c];r.copy(f,i),i+=r.length}return f},o.byteLength=l,o.prototype.toString=function(){var n=0|this.length;return 0===n?"":0===arguments.length?A(this,0,n):m.apply(this,arguments)},o.prototype.equals=function(n){if(!o.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:0===o.compare(this,n)},o.prototype.inspect=function(){var n="",a=c.INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(n+=" ... ")),"<Buffer "+n+">"},o.prototype.compare=function(n){if(!o.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?0:o.compare(this,n)},o.prototype.indexOf=function(n,a){function c(n,a,c){for(var f=-1,i=0;c+i<n.length;i++)if(n[c+i]===a[-1===f?0:i-f]){if(-1===f&&(f=i),i-f+1===a.length)return c+f}else f=-1;return-1}if(a>2147483647?a=2147483647:-2147483648>a&&(a=-2147483648),a>>=0,0===this.length)return-1;if(a>=this.length)return-1;if(0>a&&(a=Math.max(this.length+a,0)),"string"==typeof n)return 0===n.length?-1:String.prototype.indexOf.call(this,n,a);if(o.isBuffer(n))return c(this,n,a);if("number"==typeof n)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,n,a):c(this,[n],a);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(n){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(n)},o.prototype.set=function(n,a){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(n,a)},o.prototype.write=function(n,a,c,f){if(void 0===a)f="utf8",c=this.length,a=0;else if(void 0===c&&"string"==typeof a)f=a,c=this.length,a=0;else if(isFinite(a))a=0|a,isFinite(c)?(c=0|c,void 0===f&&(f="utf8")):(f=c,c=void 0);else{var i=f;f=a,a=0|c,c=i}var o=this.length-a;if((void 0===c||c>o)&&(c=o),n.length>0&&(0>c||0>a)||a>this.length)throw new RangeError("attempt to write outside buffer bounds");f||(f="utf8");for(var r=!1;;)switch(f){case"hex":return p(this,n,a,c);case"utf8":case"utf-8":return q(this,n,a,c);case"ascii":return s(this,n,a,c);case"binary":return w(this,n,a,c);case"base64":return x(this,n,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,n,a,c);default:if(r)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(n,a){var c=this.length;n=~~n,a=void 0===a?c:~~a,0>n?(n+=c,0>n&&(n=0)):n>c&&(n=c),0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),n>a&&(a=n);var f;if(o.TYPED_ARRAY_SUPPORT)f=o._augment(this.subarray(n,a));else{var i=a-n;f=new o(i,void 0);for(var r=0;i>r;r++)f[r]=this[r+n]}return f.length&&(f.parent=this.parent||this),f},o.prototype.readUIntLE=function(n,a,c){n=0|n,a=0|a,c||G(n,a,this.length);for(var f=this[n],i=1,o=0;++o<a&&(i*=256);)f+=this[n+o]*i;return f},o.prototype.readUIntBE=function(n,a,c){n=0|n,a=0|a,c||G(n,a,this.length);for(var f=this[n+--a],i=1;a>0&&(i*=256);)f+=this[n+--a]*i;return f},o.prototype.readUInt8=function(n,a){return a||G(n,1,this.length),this[n]},o.prototype.readUInt16LE=function(n,a){return a||G(n,2,this.length),this[n]|this[n+1]<<8},o.prototype.readUInt16BE=function(n,a){return a||G(n,2,this.length),this[n]<<8|this[n+1]},o.prototype.readUInt32LE=function(n,a){return a||G(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]},o.prototype.readUInt32BE=function(n,a){return a||G(n,4,this.length),16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])},o.prototype.readIntLE=function(n,a,c){n=0|n,a=0|a,c||G(n,a,this.length);for(var f=this[n],i=1,o=0;++o<a&&(i*=256);)f+=this[n+o]*i;return i*=128,f>=i&&(f-=Math.pow(2,8*a)),f},o.prototype.readIntBE=function(n,a,c){n=0|n,a=0|a,c||G(n,a,this.length);for(var f=a,i=1,o=this[n+--f];f>0&&(i*=256);)o+=this[n+--f]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*a)),o},o.prototype.readInt8=function(n,a){return a||G(n,1,this.length),128&this[n]?-1*(255-this[n]+1):this[n]},o.prototype.readInt16LE=function(n,a){a||G(n,2,this.length);var c=this[n]|this[n+1]<<8;return 32768&c?4294901760|c:c},o.prototype.readInt16BE=function(n,a){a||G(n,2,this.length);var c=this[n+1]|this[n]<<8;return 32768&c?4294901760|c:c},o.prototype.readInt32LE=function(n,a){return a||G(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},o.prototype.readInt32BE=function(n,a){return a||G(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},o.prototype.readFloatLE=function(n,a){return a||G(n,4,this.length),W.read(this,n,!0,23,4)},o.prototype.readFloatBE=function(n,a){return a||G(n,4,this.length),W.read(this,n,!1,23,4)},o.prototype.readDoubleLE=function(n,a){return a||G(n,8,this.length),W.read(this,n,!0,52,8)},o.prototype.readDoubleBE=function(n,a){return a||G(n,8,this.length),W.read(this,n,!1,52,8)},o.prototype.writeUIntLE=function(n,a,c,f){n=+n,a=0|a,c=0|c,f||H(this,n,a,c,Math.pow(2,8*c),0);var i=1,o=0;for(this[a]=255&n;++o<c&&(i*=256);)this[a+o]=n/i&255;return a+c},o.prototype.writeUIntBE=function(n,a,c,f){n=+n,a=0|a,c=0|c,f||H(this,n,a,c,Math.pow(2,8*c),0);var i=c-1,o=1;for(this[a+i]=255&n;--i>=0&&(o*=256);)this[a+i]=n/o&255;return a+c},o.prototype.writeUInt8=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,1,255,0),o.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[a]=255&n,a+1},o.prototype.writeUInt16LE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8):I(this,n,a,!0),a+2},o.prototype.writeUInt16BE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[a]=n>>>8,this[a+1]=255&n):I(this,n,a,!1),a+2},o.prototype.writeUInt32LE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[a+3]=n>>>24,this[a+2]=n>>>16,this[a+1]=n>>>8,this[a]=255&n):J(this,n,a,!0),a+4},o.prototype.writeUInt32BE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=255&n):J(this,n,a,!1),a+4},o.prototype.writeIntLE=function(n,a,c,f){if(n=+n,a=0|a,!f){var i=Math.pow(2,8*c-1);H(this,n,a,c,i-1,-i)}var o=0,r=1,t=0>n?1:0;for(this[a]=255&n;++o<c&&(r*=256);)this[a+o]=(n/r>>0)-t&255;return a+c},o.prototype.writeIntBE=function(n,a,c,f){if(n=+n,a=0|a,!f){var i=Math.pow(2,8*c-1);H(this,n,a,c,i-1,-i)}var o=c-1,r=1,t=0>n?1:0;for(this[a+o]=255&n;--o>=0&&(r*=256);)this[a+o]=(n/r>>0)-t&255;return a+c},o.prototype.writeInt8=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,1,127,-128),o.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),0>n&&(n=255+n+1),this[a]=255&n,a+1},o.prototype.writeInt16LE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8):I(this,n,a,!0),a+2},o.prototype.writeInt16BE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[a]=n>>>8,this[a+1]=255&n):I(this,n,a,!1),a+2},o.prototype.writeInt32LE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8,this[a+2]=n>>>16,this[a+3]=n>>>24):J(this,n,a,!0),a+4},o.prototype.writeInt32BE=function(n,a,c){return n=+n,a=0|a,c||H(this,n,a,4,2147483647,-2147483648),0>n&&(n=4294967295+n+1),o.TYPED_ARRAY_SUPPORT?(this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=255&n):J(this,n,a,!1),a+4},o.prototype.writeFloatLE=function(n,a,c){return L(this,n,a,!0,c)},o.prototype.writeFloatBE=function(n,a,c){return L(this,n,a,!1,c)},o.prototype.writeDoubleLE=function(n,a,c){return M(this,n,a,!0,c)},o.prototype.writeDoubleBE=function(n,a,c){return M(this,n,a,!1,c)},o.prototype.copy=function(n,a,c,f){if(c||(c=0),f||0===f||(f=this.length),a>=n.length&&(a=n.length),a||(a=0),f>0&&c>f&&(f=c),f===c)return 0;if(0===n.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>f)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),n.length-a<f-c&&(f=n.length-a+c);var i,r=f-c;if(this===n&&a>c&&f>a)for(i=r-1;i>=0;i--)n[i+a]=this[i+c];else if(1e3>r||!o.TYPED_ARRAY_SUPPORT)for(i=0;r>i;i++)n[i+a]=this[i+c];else n._set(this.subarray(c,c+r),a);return r},o.prototype.fill=function(n,a,c){if(n||(n=0),a||(a=0),c||(c=this.length),a>c)throw new RangeError("end < start");if(c!==a&&0!==this.length){if(0>a||a>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var f;if("number"==typeof n)for(f=a;c>f;f++)this[f]=n;else{var i=Q(n.toString()),o=i.length;for(f=a;c>f;f++)this[f]=i[f%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var n=new Uint8Array(this.length),a=0,c=n.length;c>a;a+=1)n[a]=this[a];return n.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=o.prototype;o._augment=function(n){return n.constructor=o,n._isBuffer=!0,n._set=n.set,n.get=_.get,n.set=_.set,n.write=_.write,n.toString=_.toString,n.toLocaleString=_.toString,n.toJSON=_.toJSON,n.equals=_.equals,n.compare=_.compare,n.indexOf=_.indexOf,n.copy=_.copy,n.slice=_.slice,n.readUIntLE=_.readUIntLE,n.readUIntBE=_.readUIntBE,n.readUInt8=_.readUInt8,n.readUInt16LE=_.readUInt16LE,n.readUInt16BE=_.readUInt16BE,n.readUInt32LE=_.readUInt32LE,n.readUInt32BE=_.readUInt32BE,n.readIntLE=_.readIntLE,n.readIntBE=_.readIntBE,n.readInt8=_.readInt8,n.readInt16LE=_.readInt16LE,n.readInt16BE=_.readInt16BE,n.readInt32LE=_.readInt32LE,n.readInt32BE=_.readInt32BE,n.readFloatLE=_.readFloatLE,n.readFloatBE=_.readFloatBE,n.readDoubleLE=_.readDoubleLE,n.readDoubleBE=_.readDoubleBE,n.writeUInt8=_.writeUInt8,n.writeUIntLE=_.writeUIntLE,n.writeUIntBE=_.writeUIntBE,n.writeUInt16LE=_.writeUInt16LE,n.writeUInt16BE=_.writeUInt16BE,n.writeUInt32LE=_.writeUInt32LE,n.writeUInt32BE=_.writeUInt32BE,n.writeIntLE=_.writeIntLE,n.writeIntBE=_.writeIntBE,n.writeInt8=_.writeInt8,n.writeInt16LE=_.writeInt16LE,n.writeInt16BE=_.writeInt16BE,n.writeInt32LE=_.writeInt32LE,n.writeInt32BE=_.writeInt32BE,n.writeFloatLE=_.writeFloatLE,n.writeFloatBE=_.writeFloatBE,n.writeDoubleLE=_.writeDoubleLE,n.writeDoubleBE=_.writeDoubleBE,n.fill=_.fill,n.inspect=_.inspect,n.toArrayBuffer=_.toArrayBuffer,n};var nn=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:10,isarray:4}],4:[function(n,a,c){var f={}.toString;a.exports=Array.isArray||function(n){return"[object Array]"==f.call(n)}},{}],5:[function(n,a,c){"use strict";function f(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(n){var a=new f;a.pre=n.pre,a.body=n.body,a.post=n.post;var c=n.args.slice(0);a.argTypes=c;for(var i=0;i<c.length;++i){var r=c[i];if("array"===r||"object"==typeof r&&r.blockIndices){if(a.argTypes[i]="array",a.arrayArgs.push(i),a.arrayBlockIndices.push(r.blockIndices?r.blockIndices:0),a.shimArgs.push("array"+i),i<a.pre.args.length&&a.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<a.post.args.length&&a.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===r)a.scalarArgs.push(i),a.shimArgs.push("scalar"+i);else if("index"===r){if(a.indexArgs.push(i),i<a.pre.args.length&&a.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<a.body.args.length&&a.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<a.post.args.length&&a.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===r){if(a.shapeArgs.push(i),i<a.pre.args.length&&a.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<a.body.args.length&&a.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<a.post.args.length&&a.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof r||!r.offset)throw new Error("cwise: Unknown argument type "+c[i]);a.argTypes[i]="offset",a.offsetArgs.push({array:r.array,offset:r.offset}),a.offsetArgIndex.push(i)}}if(a.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(a.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(a.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(a.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return a.debug=!!n.printCode||!!n.debug,a.funcName=n.funcName||"cwise",a.blockSize=n.blockSize||64,o(a)}var o=n("./lib/thunk.js");a.exports=i},{"./lib/thunk.js":7}],6:[function(n,a,c){"use strict";function f(n,a,c){var f,i,o=n.length,r=a.arrayArgs.length,t=a.indexArgs.length>0,u=[],v=[],X=0,b=0;for(f=0;o>f;++f)v.push(["i",f,"=0"].join(""));for(i=0;r>i;++i)for(f=0;o>f;++f)b=X,X=n[f],0===f?v.push(["d",i,"s",f,"=t",i,"p",X].join("")):v.push(["d",i,"s",f,"=(t",i,"p",X,"-s",b,"*t",i,"p",b,")"].join(""));for(u.push("var "+v.join(",")),f=o-1;f>=0;--f)X=n[f],u.push(["for(i",f,"=0;i",f,"<s",X,";++i",f,"){"].join(""));for(u.push(c),f=0;o>f;++f){for(b=X,X=n[f],i=0;r>i;++i)u.push(["p",i,"+=d",i,"s",f].join(""));t&&(f>0&&u.push(["index[",b,"]-=s",b].join("")),u.push(["++index[",X,"]"].join(""))),u.push("}")}return u.join("\n")}function i(n,a,c,i){for(var o=a.length,r=c.arrayArgs.length,t=c.blockSize,u=c.indexArgs.length>0,v=[],X=0;r>X;++X)v.push(["var offset",X,"=p",X].join(""));for(var X=n;o>X;++X)v.push(["for(var j"+X+"=SS[",a[X],"]|0;j",X,">0;){"].join("")),v.push(["if(j",X,"<",t,"){"].join("")),v.push(["s",a[X],"=j",X].join("")),v.push(["j",X,"=0"].join("")),v.push(["}else{s",a[X],"=",t].join("")),v.push(["j",X,"-=",t,"}"].join("")),u&&v.push(["index[",a[X],"]=j",X].join(""));for(var X=0;r>X;++X){for(var b=["offset"+X],d=n;o>d;++d)b.push(["j",d,"*t",X,"p",a[d]].join(""));v.push(["p",X,"=(",b.join("+"),")"].join(""))}v.push(f(a,c,i));for(var X=n;o>X;++X)v.push("}");return v.join("\n")}function o(n){for(var a=0,c=n[0].length;c>a;){for(var f=1;f<n.length;++f)if(n[f][a]!==n[0][a])return a;++a}return a}function r(n,a,c){for(var f=n.body,i=[],o=[],r=0;r<n.args.length;++r){var t=n.args[r];if(!(t.count<=0)){var u=new RegExp(t.name,"g"),v="",X=a.arrayArgs.indexOf(r);switch(a.argTypes[r]){case"offset":var b=a.offsetArgIndex.indexOf(r),d=a.offsetArgs[b];X=d.array,v="+q"+b;case"array":v="p"+X+v;var e="l"+r,g="a"+X;if(0===a.arrayBlockIndices[X])1===t.count?"generic"===c[X]?t.lvalue?(i.push(["var ",e,"=",g,".get(",v,")"].join("")),f=f.replace(u,e),o.push([g,".set(",v,",",e,")"].join(""))):f=f.replace(u,[g,".get(",v,")"].join("")):f=f.replace(u,[g,"[",v,"]"].join("")):"generic"===c[X]?(i.push(["var ",e,"=",g,".get(",v,")"].join("")),f=f.replace(u,e),t.lvalue&&o.push([g,".set(",v,",",e,")"].join(""))):(i.push(["var ",e,"=",g,"[",v,"]"].join("")),f=f.replace(u,e),t.lvalue&&o.push([g,"[",v,"]=",e].join("")));else{for(var h=[t.name],j=[v],k=0;k<Math.abs(a.arrayBlockIndices[X]);k++)h.push("\\s*\\[([^\\]]+)\\]"),j.push("$"+(k+1)+"*t"+X+"b"+k);if(u=new RegExp(h.join(""),"g"),v=j.join("+"),"generic"===c[X])throw new Error("cwise: Generic arrays not supported in combination with blocks!");f=f.replace(u,[g,"[",v,"]"].join(""))}break;case"scalar":f=f.replace(u,"Y"+a.scalarArgs.indexOf(r));break;case"index":f=f.replace(u,"index");break;case"shape":f=f.replace(u,"shape")}}}return[i.join("\n"),f,o.join("\n")].join("\n").trim()}function t(n){for(var a=new Array(n.length),c=!0,f=0;f<n.length;++f){var i=n[f],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?a[f]="u"+i.charAt(1)+o:a[f]=i.charAt(0)+o,f>0&&(c=c&&a[f]===a[f-1])}return c?a[0]:a.join("")}function u(n,a){for(var c=a[1].length-Math.abs(n.arrayBlockIndices[0])|0,u=new Array(n.arrayArgs.length),X=new Array(n.arrayArgs.length),b=0;b<n.arrayArgs.length;++b)X[b]=a[2*b],u[b]=a[2*b+1];for(var d=[],e=[],g=[],h=[],j=[],b=0;b<n.arrayArgs.length;++b){n.arrayBlockIndices[b]<0?(g.push(0),h.push(c),d.push(c),e.push(c+n.arrayBlockIndices[b])):(g.push(n.arrayBlockIndices[b]),h.push(n.arrayBlockIndices[b]+c),d.push(0),e.push(n.arrayBlockIndices[b]));for(var k=[],l=0;l<u[b].length;l++)g[b]<=u[b][l]&&u[b][l]<h[b]&&k.push(u[b][l]-g[b]);j.push(k)}for(var m=["SS"],p=["'use strict'"],q=[],l=0;c>l;++l)q.push(["s",l,"=SS[",l,"]"].join(""));for(var b=0;b<n.arrayArgs.length;++b){m.push("a"+b),m.push("t"+b),m.push("p"+b);for(var l=0;c>l;++l)q.push(["t",b,"p",l,"=t",b,"[",g[b]+l,"]"].join(""));for(var l=0;l<Math.abs(n.arrayBlockIndices[b]);++l)q.push(["t",b,"b",l,"=t",b,"[",d[b]+l,"]"].join(""))}for(var b=0;b<n.scalarArgs.length;++b)m.push("Y"+b);if(n.shapeArgs.length>0&&q.push("shape=SS.slice(0)"),n.indexArgs.length>0){for(var s=new Array(c),b=0;c>b;++b)s[b]="0";q.push(["index=[",s.join(","),"]"].join(""))}for(var b=0;b<n.offsetArgs.length;++b){for(var w=n.offsetArgs[b],x=[],l=0;l<w.offset.length;++l)0!==w.offset[l]&&(1===w.offset[l]?x.push(["t",w.array,"p",l].join("")):x.push([w.offset[l],"*t",w.array,"p",l].join("")));0===x.length?q.push("q"+b+"=0"):q.push(["q",b,"=",x.join("+")].join(""))}var y=v([].concat(n.pre.thisVars).concat(n.body.thisVars).concat(n.post.thisVars));q=q.concat(y),p.push("var "+q.join(","));for(var b=0;b<n.arrayArgs.length;++b)p.push("p"+b+"|=0");n.pre.body.length>3&&p.push(r(n.pre,n,X));var z=r(n.body,n,X),A=o(j);c>A?p.push(i(A,j[0],n,z)):p.push(f(j[0],n,z)),n.post.body.length>3&&p.push(r(n.post,n,X)),n.debug&&console.log("-----Generated cwise routine for ",a,":\n"+p.join("\n")+"\n----------");var B=[n.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",A,t(X)].join(""),C=new Function(["function ",B,"(",m.join(","),"){",p.join("\n"),"} return ",B].join(""));return C()}var v=n("uniq");a.exports=u},{uniq:22}],7:[function(n,a,c){"use strict";function f(n){var a=["'use strict'","var CACHED={}"],c=[],f=n.funcName+"_cwise_thunk";a.push(["return function ",f,"(",n.shimArgs.join(","),"){"].join(""));for(var o=[],r=[],t=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,n.arrayBlockIndices[0]),n.arrayBlockIndices[0]<0?","+n.arrayBlockIndices[0]+")":")"].join("")],u=[],v=[],X=0;X<n.arrayArgs.length;++X){var b=n.arrayArgs[X];c.push(["t",b,"=array",b,".dtype,","r",b,"=array",b,".order"].join("")),o.push("t"+b),o.push("r"+b),r.push("t"+b),r.push("r"+b+".join()"),t.push("array"+b+".data"),t.push("array"+b+".stride"),t.push("array"+b+".offset|0"),X>0&&(u.push("array"+n.arrayArgs[0]+".shape.length===array"+b+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-Math.abs(n.arrayBlockIndices[X]))),v.push("array"+n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]===array"+b+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[X])+"]"))}n.arrayArgs.length>1&&(a.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),a.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),
a.push("}"));for(var X=0;X<n.scalarArgs.length;++X)t.push("scalar"+n.scalarArgs[X]);c.push(["type=[",r.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),a.push("var "+c.join(",")),a.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",t.join(","),")}"].join("")),n.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------");var d=new Function("compile",a.join("\n"));return d(i.bind(void 0,n))}var i=n("./compile.js");a.exports=f},{"./compile.js":6}],8:[function(n,a,c){a.exports=n("cwise-compiler")},{"cwise-compiler":5}],9:[function(n,a,c){"use strict";function f(n,a,c){var i=0|n[c];if(0>=i)return[];var o,r=new Array(i);if(c===n.length-1)for(o=0;i>o;++o)r[o]=a;else for(o=0;i>o;++o)r[o]=f(n,a,c+1);return r}function i(n,a){var c,f;for(c=new Array(n),f=0;n>f;++f)c[f]=a;return c}function o(n,a){switch("undefined"==typeof a&&(a=0),typeof n){case"number":if(n>0)return i(0|n,a);break;case"object":if("number"==typeof n.length)return f(n,a,0)}return[]}a.exports=o},{}],10:[function(n,a,c){c.read=function(n,a,c,f,i){var o,r,t=8*i-f-1,u=(1<<t)-1,v=u>>1,X=-7,b=c?i-1:0,d=c?-1:1,e=n[a+b];for(b+=d,o=e&(1<<-X)-1,e>>=-X,X+=t;X>0;o=256*o+n[a+b],b+=d,X-=8);for(r=o&(1<<-X)-1,o>>=-X,X+=f;X>0;r=256*r+n[a+b],b+=d,X-=8);if(0===o)o=1-v;else{if(o===u)return r?NaN:(e?-1:1)*(1/0);r+=Math.pow(2,f),o-=v}return(e?-1:1)*r*Math.pow(2,o-f)},c.write=function(n,a,c,f,i,o){var r,t,u,v=8*o-i-1,X=(1<<v)-1,b=X>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,e=f?0:o-1,g=f?1:-1,h=0>a||0===a&&0>1/a?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(t=isNaN(a)?1:0,r=X):(r=Math.floor(Math.log(a)/Math.LN2),a*(u=Math.pow(2,-r))<1&&(r--,u*=2),a+=r+b>=1?d/u:d*Math.pow(2,1-b),a*u>=2&&(r++,u/=2),r+b>=X?(t=0,r=X):r+b>=1?(t=(a*u-1)*Math.pow(2,i),r+=b):(t=a*Math.pow(2,b-1)*Math.pow(2,i),r=0));i>=8;n[c+e]=255&t,e+=g,t/=256,i-=8);for(r=r<<i|t,v+=i;v>0;n[c+e]=255&r,e+=g,r/=256,v-=8);n[c+e-g]|=128*h}},{}],11:[function(n,a,c){"use strict";function f(n){for(var a=new Array(n),c=0;n>c;++c)a[c]=c;return a}a.exports=f},{}],12:[function(n,a,c){a.exports=function(n){return!(null==n||!(n._isBuffer||n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)))}},{}],13:[function(n,a,c){"use strict";function f(n,a,c){var f,u,v=a.shape,X=v.length,b=1,d=new Array(X),e=0;for(f=X-1;f>=0;--f)if(d[f]=b,b*=v[f],e=Math.max(e,t.scratchMemory(v[f])),a.shape[f]!==c.shape[f])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var g,h=4*b+e;g="array"===a.dtype||"float64"===a.dtype||"custom"===a.dtype?r.mallocDouble(h):r.mallocFloat(h);var j,k,l,m,p=o(g,v.slice(0),d,0),q=o(g,v.slice(0),d.slice(0),b),s=o(g,v.slice(0),d.slice(0),2*b),w=o(g,v.slice(0),d.slice(0),3*b),x=4*b;for(i.assign(p,a),i.assign(q,c),f=X-1;f>=0&&(t(n,b/v[f],v[f],g,p.offset,q.offset,x),0!==f);--f){for(k=1,l=s.stride,m=w.stride,u=f-1;X>u;++u)m[u]=l[u]=k,k*=v[u];for(u=f-2;u>=0;--u)m[u]=l[u]=k,k*=v[u];i.assign(s,p),i.assign(w,q),j=p,p=s,s=j,j=q,q=w,w=j}i.assign(a,p),i.assign(c,q),r.free(g)}var i=n("ndarray-ops"),o=n("ndarray"),r=n("typedarray-pool"),t=n("./lib/fft-matrix.js");a.exports=f},{"./lib/fft-matrix.js":14,ndarray:18,"ndarray-ops":17,"typedarray-pool":21}],14:[function(n,a,c){function f(n,a,c,f,i,u,v){n|=0,a|=0,c|=0,i|=0,u|=0,t.isPow2(c)?o(n,a,c,f,i,u):r(n,a,c,f,i,u,v)}function i(n){return t.isPow2(n)?0:2*n+4*t.nextPow2(2*n+1)}function o(n,a,c,f,i,o){n|=0,a|=0,c|=0,i|=0,o|=0;var r,u,v,X,b,d,e,g,h,j,k,l,m,p,q,s,w,x,y,z,A,B,C,D,E;for(r=c,u=t.log2(r),x=0;a>x;++x){for(e=r>>1,b=0,v=0;r-1>v;v++){for(b>v&&(m=f[i+v],f[i+v]=f[i+b],f[i+b]=m,m=f[o+v],f[o+v]=f[o+b],f[o+b]=m),d=e;b>=d;)b-=d,d>>=1;b+=d}for(k=-1,l=0,j=1,g=0;u>g;g++){for(h=j,j<<=1,s=1,w=0,b=0;h>b;b++){for(v=b;r>v;v+=j)X=v+h,y=f[i+X],z=f[o+X],A=f[i+v],B=f[o+v],C=s*(y+z),D=y*(w-s),E=z*(s+w),p=C-E,q=C+D,f[i+X]=A-p,f[o+X]=B-q,f[i+v]+=p,f[o+v]+=q;C=k*(s+w),D=s*(l-k),E=w*(k+l),s=C-E,w=C+D}l=Math.sqrt((1-k)/2),0>n&&(l=-l),k=Math.sqrt((1+k)/2)}if(0>n){var F=1/r;for(v=0;r>v;v++)f[i+v]*=F,f[o+v]*=F}i+=c,o+=c}}function r(n,a,c,f,i,r,u){n|=0,a|=0,c|=0,i|=0,r|=0,u|=0;var v,X,b,d,e,g,h,j,k,l=t.nextPow2(2*c+1),m=u,p=m+c,q=p+c,s=q+l,w=s+l,x=w+l,y=-n*Math.PI/c;for(k=0;c>k;++k)X=y*(k*k%(2*c)),d=Math.cos(X),e=Math.sin(X),f[w+(l-k)]=f[w+k]=f[m+k]=d,f[x+(l-k)]=f[x+k]=f[p+k]=e;for(k=c;l-c>=k;++k)f[w+k]=0;for(k=c;l-c>=k;++k)f[x+k]=0;for(o(1,1,l,f,w,x),y=0>n?1/c:1,v=0;a>v;++v){for(k=0;c>k;++k)X=f[i+k],b=f[r+k],d=f[m+k],e=-f[p+k],g=d*(X+b),h=X*(e-d),j=b*(d+e),f[q+k]=g-j,f[s+k]=g+h;for(k=c;l>k;++k)f[q+k]=0;for(k=c;l>k;++k)f[s+k]=0;for(o(1,1,l,f,q,s),k=0;l>k;++k)X=f[q+k],b=f[s+k],d=f[w+k],e=f[x+k],g=d*(X+b),h=X*(e-d),j=b*(d+e),f[q+k]=g-j,f[s+k]=g+h;for(o(-1,1,l,f,q,s),k=0;c>k;++k)X=f[q+k],b=f[s+k],d=f[m+k],e=-f[p+k],g=d*(X+b),h=X*(e-d),j=b*(d+e),f[i+k]=y*(g-j),f[r+k]=y*(g+h);i+=c,r+=c}}var t=n("bit-twiddle");a.exports=f,a.exports.scratchMemory=i},{"bit-twiddle":2}],15:[function(n,a,c){"use strict";function f(n){return Array.isArray(n)?[n.length,n[0].length]:n.shape}function i(n,a,c){var i=f(n),o=f(a),r=f(c);if(i[0]!==o[0]||i[1]!==r[1]||o[1]!==r[0])throw new Error("Mismatched array shapes for matrix product")}function o(n){if(Array.isArray(n)){if(Array.isArray(n))return["r","native"]}else if(n.shape&&2===n.shape.length)return n.order[0]?["r",n.dtype]:["c",n.dtype];throw new Error("Unrecognized data type")}function r(n,a,c,f,r){void 0===f&&(f=1),void 0===r&&(r=0);var v=1!==f,X=0!==r,b=o(n),d=o(a),e=o(c);i(n,a,c);var g=[b,d,e,v,X].join(":"),h=u[g];return h||(h=u[g]=t(b,d,e,v,X)),h(n,a,c,f,r)}a.exports=r;var t=n("./lib/planner.js"),u={}},{"./lib/planner.js":16}],16:[function(n,a,c){"use strict";function f(n,a){return"native"===a[1]?[n,"d0=",n,".length,",n,"d1=",n,"[0].length,"].join(""):[n,"d0=",n,".shape[0],",n,"d1=",n,".shape[1],",n,"s0=",n,".stride[0],",n,"s1=",n,".stride[1],",n,"o=",n,".offset,",n,"d=",n,".data,"].join("")}function i(n,a,c,f,i,o){var r=[];return"native"===c[1]?n[0]&&(f?r.push("var ",a,"p=",a,"[",f,"];"):r.push("var ",a,"p=",a,"[0];")):f&&i?o?r.push("var ",a,"t0=",a,"s",n[0],",",a,"t1=",a,"s",n[1],"-",a,"s",n[0],"*",o,",",a,"p=",a,"o+",f,"*",a,"s0+",i,"*",a,"s1;"):r.push("var ",a,"t0=",a,"s",n[0],",",a,"p=",a,"o+",f,"*",a,"s0+",i,"*",a,"s1;"):f?r.push("var ",a,"t0=",a,"s",n[0],",",a,"p=",a,"o+",f,"*",a,"s0;"):i?r.push("var ",a,"t0=",a,"s",n[0],",",a,"p=",a,"o+",i,"*",a,"s1;"):r.push("var ",a,"t0=",a,"s",n[0],",",a,"t1=",a,"s",n[1],"-",a,"s",n[0],"*",a,"d",n[0],",",a,"p=",a,"o;"),r}function o(n,a,c,f,i){var o=[];return"native"===c[1]?n[0]&&1===f&&o.push(a,"p=",a,"[",i,"+1]"):o.push(a,"p+=",a,"t",f,";"),o}function r(n,a,c,f,i,o){var r=[];return"native"===c[1]?n[0]?r.push(a,"p[",i,"]=",o,";"):r.push(a,"[",f,"][",i,"]=",o,";"):"generic"===c[1]?r.push(a,"d.set(",a,"p,",o,");"):r.push(a,"d[",a,"p]=",o,";"),r}function t(n,a,c,f,i){var o=[];return"native"===c[1]?n[0]?o.push(a,"p[",i,"]"):o.push(a,"[",f,"][",i,"]"):"generic"===c[1]?o.push(a,"d.get(",a,"p)"):o.push(a,"d[",a,"p]"),o.join("")}function u(n,a,c,f,u){var v=[],X="r"===n[0]?[1,0]:[0,1],b=[1,0],d=[0,1],e=["i","j"];return v.push.apply(v,i(X,"o",n)),X[1]?(v.push("for(j=0;j<od1;++j){"),v.push("for(i=0;i<od0;++i){")):(v.push("for(i=0;i<od0;++i){"),v.push("for(j=0;j<od1;++j){")),v.push.apply(v,i(b,"a",a,"i")),v.push.apply(v,i(d,"b",c,void 0,"j")),v.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",t(b,"a",a,"i","k"),"*",t(d,"b",c,"k","j"),";"),v.push.apply(v,o(b,"a",a,0,"k")),v.push.apply(v,o(d,"b",c,0,"k")),v.push("}"),f&&v.push("r*=A;"),u&&v.push("r+=B*",t(X,"o",n,"i","j"),";"),v.push.apply(v,r(X,"o",n,"i","j","r")),v.push.apply(v,o(X,"o",n,0,e[1])),v.push("}"),v.push.apply(v,o(X,"o",n,1,e[0])),v.push("}"),v}function v(n,a){var c,f=[],u="r"===n[0]?[1,0]:[0,1];return a&&f.push("if(B!==1.0){"),f.push.apply(f,i(u,"o",n)),u[0]?(f.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),c=["i","j"]):(f.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),c=["j","i"]),a?f.push.apply(f,r(u,"o",n,"i","j","B*"+t(u,"o",n,"i","j"))):f.push.apply(f,r(u,"o",n,"i","j","0")),f.push.apply(f,o(u,"o",n,0,c[1])),f.push("}"),f.push.apply(f,o(u,"o",n,1,c[0])),f.push("}"),a&&f.push("}"),f}function X(n,a,c,f,u){var X=[],b=["od0","od1","ad1"],e=[1,0],g=[1,0],h=[0,1];X.push.apply(X,v(n,u));for(var j=0;3>j;++j)X.push("for(var i",j,"=",b[j],";i",j,">0;){","var w",j,"=",d,";","if(i",j,"<",d,"){","w",j,"=i",j,";","i",j,"=0;","}else{","i",j,"-=",d,";","}");X.push.apply(X,i(e,"o",n,"i0","i1","w1")),X.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),X.push.apply(X,i(g,"a",a,"(i0+i)","i2")),X.push.apply(X,i(h,"b",c,"i2","(i1+j)")),X.push("for(k=0;k<w2;++k){"),X.push("r+=",t(g,"a",a,"(i0+i)","(i2+k)"),"*",t(h,"b",c,"(i2+k)","(i1+j)"),";"),X.push.apply(X,o(g,"a",a,0,"(i2+k)")),X.push.apply(X,o(h,"b",c,0,"(i2+k)")),X.push("}");var k="r";return f&&(k="A*r"),X.push.apply(X,r(e,"o",n,"(i0+i)","(i1+j)",k+"+"+t(e,"o",n,"(i0+i)","(i1+j)"))),X.push.apply(X,o(e,"o",n,0,"(i1+j)")),X.push("}"),X.push.apply(X,o(e,"o",n,1,"(i0+i)")),X.push("}}}}"),X}function b(n,a,c,i,o){var r=["gemm",n[0],n[1],"a",a[0],a[1],"b",c[0],c[1],i?"alpha":"",o?"beta":""].join(""),t=["function ",r,"(o,a,b,A,B){","var ",f("o",n),f("a",a),f("b",c),"i,j,k;"];"r"===a[0]&&"c"===c[0]?t.push.apply(t,u(n,a,c,i,o)):t.push.apply(t,X(n,a,c,i,o)),t.push("}return ",r);var v=new Function(t.join(""));return v()}a.exports=b;var d=32},{}],17:[function(n,a,c){"use strict";function f(n){if(!n)return t;for(var a=0;a<n.args.length;++a){var c=n.args[a];0===a?n.args[a]={name:c,lvalue:!0,rvalue:!!n.rvalue,count:n.count||1}:n.args[a]={name:c,lvalue:!1,rvalue:!0,count:1}}return n.thisVars||(n.thisVars=[]),n.localVars||(n.localVars=[]),n}function i(n){return r({args:n.args,pre:f(n.pre),body:f(n.body),post:f(n.proc),funcName:n.funcName})}function o(n){for(var a=[],c=0;c<n.args.length;++c)a.push("a"+c);var f=new Function("P",["return function ",n.funcName,"_ndarrayops(",a.join(","),") {P(",a.join(","),");return a0}"].join(""));return f(i(n))}var r=n("cwise-compiler"),t={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var n in u){var a=u[n];c[n]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+a+"c"},funcName:n}),c[n+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+a+"=b"},rvalue:!0,funcName:n+"eq"}),c[n+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+a+"s"},funcName:n+"s"}),c[n+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+a+"=s"},rvalue:!0,funcName:n+"seq"})}}();var v={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var n in v){var a=v[n];c[n]=o({args:["array","array"],body:{args:["a","b"],body:"a="+a+"b"},funcName:n}),c[n+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+a+"a"},rvalue:!0,count:2,funcName:n+"eq"})}}();var X={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var n in X){var a=X[n];c[n]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+a+"c"},funcName:n}),c[n+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+a+"s"},funcName:n+"s"}),c[n+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+a+"b"},rvalue:!0,count:2,funcName:n+"eq"}),c[n+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+a+"s"},rvalue:!0,count:2,funcName:n+"seq"})}}();var b=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var n=0;n<b.length;++n){var a=b[n];c[a]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:a}),c[a+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var n=0;n<d.length;++n){var a=d[n];c[a]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:a}),c[a+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:a+"s"}),c[a+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"seq"})}}();var e=["atan2","pow"];!function(){for(var n=0;n<e.length;++n){var a=e[n];c[a+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:a+"op"}),c[a+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:a+"ops"}),c[a+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opeq"}),c[a+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opseq"})}}(),c.any=r({args:["array"],pre:t,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=r({args:["array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=r({args:["array","array"],pre:t,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":5}],18:[function(n,a,c){function f(n,a){return n[0]-a[0]}function i(){var n,a=this.stride,c=new Array(a.length);for(n=0;n<c.length;++n)c[n]=[Math.abs(a[n]),n];c.sort(f);var i=new Array(c.length);for(n=0;n<i.length;++n)i[n]=c[n][1];return i}function o(n,a){var c=["View",a,"d",n].join("");0>a&&(c="View_Nil"+n);var f="generic"===n;if(-1===a){var o="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+n+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",r=new Function(o);return r()}if(0===a){var o="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+n+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(f?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(f?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",r=new Function("TrivialArray",o);return r(b[n][0])}var o=["'use strict'"],t=u(a),v=t.map(function(n){return"i"+n}),X="this.offset+"+t.map(function(n){return"this.stride["+n+"]*i"+n}).join("+"),d=t.map(function(n){return"b"+n}).join(","),e=t.map(function(n){return"c"+n}).join(",");o.push("function "+c+"(a,"+d+","+e+",d){this.data=a","this.shape=["+d+"]","this.stride=["+e+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+n+"'","proto.dimension="+a),o.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+t.map(function(n){return"this.shape["+n+"]"}).join("*"),"}})"),1===a?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>a?(o.push("function "+c+"_order(){"),2===a?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===a&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+c+"_set("+v.join(",")+",v){"),f?o.push("return this.data.set("+X+",v)}"):o.push("return this.data["+X+"]=v}"),o.push("proto.get=function "+c+"_get("+v.join(",")+"){"),f?o.push("return this.data.get("+X+")}"):o.push("return this.data["+X+"]}"),o.push("proto.index=function "+c+"_index(",v.join(),"){return "+X+"}"),o.push("proto.hi=function "+c+"_hi("+v.join(",")+"){return new "+c+"(this.data,"+t.map(function(n){return["(typeof i",n,"!=='number'||i",n,"<0)?this.shape[",n,"]:i",n,"|0"].join("")}).join(",")+","+t.map(function(n){return"this.stride["+n+"]"}).join(",")+",this.offset)}");var g=t.map(function(n){return"a"+n+"=this.shape["+n+"]"}),h=t.map(function(n){return"c"+n+"=this.stride["+n+"]"});o.push("proto.lo=function "+c+"_lo("+v.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+h.join(","));for(var j=0;a>j;++j)o.push("if(typeof i"+j+"==='number'&&i"+j+">=0){d=i"+j+"|0;b+=c"+j+"*d;a"+j+"-=d}");o.push("return new "+c+"(this.data,"+t.map(function(n){return"a"+n}).join(",")+","+t.map(function(n){return"c"+n}).join(",")+",b)}"),o.push("proto.step=function "+c+"_step("+v.join(",")+"){var "+t.map(function(n){return"a"+n+"=this.shape["+n+"]"}).join(",")+","+t.map(function(n){return"b"+n+"=this.stride["+n+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var j=0;a>j;++j)o.push("if(typeof i"+j+"==='number'){d=i"+j+"|0;if(d<0){c+=b"+j+"*(a"+j+"-1);a"+j+"=ceil(-a"+j+"/d)}else{a"+j+"=ceil(a"+j+"/d)}b"+j+"*=d}");o.push("return new "+c+"(this.data,"+t.map(function(n){return"a"+n}).join(",")+","+t.map(function(n){return"b"+n}).join(",")+",c)}");for(var k=new Array(a),l=new Array(a),j=0;a>j;++j)k[j]="a[i"+j+"]",l[j]="b[i"+j+"]";o.push("proto.transpose=function "+c+"_transpose("+v+"){"+v.map(function(n,a){return n+"=("+n+"===undefined?"+a+":"+n+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+k.join(",")+","+l.join(",")+",this.offset)}"),o.push("proto.pick=function "+c+"_pick("+v+"){var a=[],b=[],c=this.offset");for(var j=0;a>j;++j)o.push("if(typeof i"+j+"==='number'&&i"+j+">=0){c=(c+this.stride["+j+"]*i"+j+")|0}else{a.push(this.shape["+j+"]);b.push(this.stride["+j+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+t.map(function(n){return"shape["+n+"]"}).join(",")+","+t.map(function(n){return"stride["+n+"]"}).join(",")+",offset)}");var r=new Function("CTOR_LIST","ORDER",o.join("\n"));return r(b[n],i)}function r(n){if(v(n))return"buffer";if(X)switch(Object.prototype.toString.call(n)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(n)?"array":"generic"}function t(n,a,c,f){if(void 0===n){var i=b.array[0];return i([])}"number"==typeof n&&(n=[n]),void 0===a&&(a=[n.length]);var t=a.length;if(void 0===c){c=new Array(t);for(var u=t-1,v=1;u>=0;--u)c[u]=v,v*=a[u]}if(void 0===f){f=0;for(var u=0;t>u;++u)c[u]<0&&(f-=(a[u]-1)*c[u])}for(var X=r(n),d=b[X];d.length<=t+1;)d.push(o(X,d.length-1));var i=d[t+1];return i(n,a,c,f)}var u=n("iota-array"),v=n("is-buffer"),X="undefined"!=typeof Float64Array,b={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};a.exports=t},{"iota-array":11,"is-buffer":12}],19:[function(n,a,c){(function(n){function a(n,a){for(var c=0,f=n.length-1;f>=0;f--){var i=n[f];"."===i?n.splice(f,1):".."===i?(n.splice(f,1),c++):c&&(n.splice(f,1),c--)}if(a)for(;c--;c)n.unshift("..");return n}function f(n,a){if(n.filter)return n.filter(a);for(var c=[],f=0;f<n.length;f++)a(n[f],f,n)&&c.push(n[f]);return c}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(n){return i.exec(n).slice(1)};c.resolve=function(){for(var c="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var r=o>=0?arguments[o]:n.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(c=r+"/"+c,i="/"===r.charAt(0))}return c=a(f(c.split("/"),function(n){return!!n}),!i).join("/"),(i?"/":"")+c||"."},c.normalize=function(n){var i=c.isAbsolute(n),o="/"===r(n,-1);return n=a(f(n.split("/"),function(n){return!!n}),!i).join("/"),n||i||(n="."),n&&o&&(n+="/"),(i?"/":"")+n},c.isAbsolute=function(n){return"/"===n.charAt(0)},c.join=function(){var n=Array.prototype.slice.call(arguments,0);return c.normalize(f(n,function(n,a){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))},c.relative=function(n,a){function f(n){for(var a=0;a<n.length&&""===n[a];a++);for(var c=n.length-1;c>=0&&""===n[c];c--);return a>c?[]:n.slice(a,c-a+1)}n=c.resolve(n).substr(1),a=c.resolve(a).substr(1);for(var i=f(n.split("/")),o=f(a.split("/")),r=Math.min(i.length,o.length),t=r,u=0;r>u;u++)if(i[u]!==o[u]){t=u;break}for(var v=[],u=t;u<i.length;u++)v.push("..");return v=v.concat(o.slice(t)),v.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(n){var a=o(n),c=a[0],f=a[1];return c||f?(f&&(f=f.substr(0,f.length-1)),c+f):"."},c.basename=function(n,a){var c=o(n)[2];return a&&c.substr(-1*a.length)===a&&(c=c.substr(0,c.length-a.length)),c},c.extname=function(n){return o(n)[3]};var r="b"==="ab".substr(-1)?function(n,a,c){return n.substr(a,c)}:function(n,a,c){return 0>a&&(a=n.length+a),n.substr(a,c)}}).call(this,n("_process"))},{_process:20}],20:[function(n,a,c){function f(){X=!1,t.length?v=t.concat(v):b=-1,v.length&&i()}function i(){if(!X){var n=setTimeout(f);X=!0;for(var a=v.length;a;){for(t=v,v=[];++b<a;)t&&t[b].run();b=-1,a=v.length}t=null,X=!1,clearTimeout(n)}}function o(n,a){this.fun=n,this.array=a}function r(){}var t,u=a.exports={},v=[],X=!1,b=-1;u.nextTick=function(n){var a=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)a[c-1]=arguments[c];v.push(new o(n,a)),1!==v.length||X||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=r,u.addListener=r,u.once=r,u.off=r,u.removeListener=r,u.removeAllListeners=r,u.emit=r,u.binding=function(n){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(n){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],21:[function(n,a,c){(function(a,f){"use strict";function i(n){if(n){var a=n.length||n.byteLength,c=l.log2(a);s[c].push(n)}}function o(n){i(n.buffer)}function r(n){var n=l.nextPow2(n),a=l.log2(n),c=s[a];return c.length>0?c.pop():new ArrayBuffer(n)}function t(n){return new Uint8Array(r(n),0,n)}function u(n){return new Uint16Array(r(2*n),0,n)}function v(n){return new Uint32Array(r(4*n),0,n)}function X(n){return new Int8Array(r(n),0,n)}function b(n){return new Int16Array(r(2*n),0,n)}function d(n){return new Int32Array(r(4*n),0,n)}function e(n){return new Float32Array(r(4*n),0,n)}function g(n){return new Float64Array(r(8*n),0,n)}function h(n){return p?new Uint8ClampedArray(r(n),0,n):t(n)}function j(n){return new DataView(r(n),0,n)}function k(n){n=l.nextPow2(n);var a=l.log2(n),c=w[a];return c.length>0?c.pop():new f(n)}var l=n("bit-twiddle"),m=n("dup");a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var p="undefined"!=typeof Uint8ClampedArray,q=a.__TYPEDARRAY_POOL;q.UINT8C||(q.UINT8C=m([32,0])),q.BUFFER||(q.BUFFER=m([32,0]));var s=q.DATA,w=q.BUFFER;c.free=function(n){if(f.isBuffer(n))w[l.log2(n.length)].push(n);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(n)&&(n=n.buffer),!n)return;var a=n.length||n.byteLength,c=0|l.log2(a);s[c].push(n)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=o,c.freeArrayBuffer=i,c.freeBuffer=function(n){w[l.log2(n.length)].push(n)},c.malloc=function(n,a){if(void 0===a||"arraybuffer"===a)return r(n);switch(a){case"uint8":return t(n);case"uint16":return u(n);case"uint32":return v(n);case"int8":return X(n);case"int16":return b(n);case"int32":return d(n);case"float":case"float32":return e(n);case"double":case"float64":return g(n);case"uint8_clamped":return h(n);case"buffer":return k(n);case"data":case"dataview":return j(n);default:return null}return null},c.mallocArrayBuffer=r,c.mallocUint8=t,c.mallocUint16=u,c.mallocUint32=v,c.mallocInt8=X,c.mallocInt16=b,c.mallocInt32=d,c.mallocFloat32=c.mallocFloat=e,c.mallocFloat64=c.mallocDouble=g,c.mallocUint8Clamped=h,c.mallocDataView=j,c.mallocBuffer=k,c.clearCache=function(){for(var n=0;32>n;++n)q.UINT8[n].length=0,q.UINT16[n].length=0,q.UINT32[n].length=0,q.INT8[n].length=0,q.INT16[n].length=0,q.INT32[n].length=0,q.FLOAT[n].length=0,q.DOUBLE[n].length=0,q.UINT8C[n].length=0,s[n].length=0,w[n].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},n("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:9}],22:[function(n,a,c){"use strict";function f(n,a){for(var c=1,f=n.length,i=n[0],o=n[0],r=1;f>r;++r)if(o=i,i=n[r],a(i,o)){if(r===c){c++;continue}n[c++]=i}return n.length=c,n}function i(n){for(var a=1,c=n.length,f=n[0],i=n[0],o=1;c>o;++o,i=f)if(i=f,f=n[o],f!==i){if(o===a){a++;continue}n[a++]=f}return n.length=a,n}function o(n,a,c){return 0===n.length?n:a?(c||n.sort(a),f(n,a)):(c||n.sort(),i(n))}a.exports=o},{}],23:[function(n,a,c){"use strict";a.exports={printThreshold:7,nFloatingValues:5}},{}],24:[function(n,a,c){"use strict";a.exports={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array}},{}],25:[function(n,a,c){"use strict";a.exports={ValueError:function(){var n=Error.apply(this,arguments);return n.name=this.constructor.name,n},ConfigError:function(){var n=Error.apply(this,arguments);return n.name=this.constructor.name,n},NotImplementedError:function(){var n=Error.apply(this,arguments);return n.name=this.constructor.name,n}}},{}],26:[function(n,a,c){"use strict";a.exports=function(n,a,c,f,i){var o=a-1,r=a+f-1,t=n-1,u=n+c-1;return 0!==a&&0!==n?i.selection.get(t,o)-i.selection.get(u,o)-i.selection.get(t,r)+i.selection.get(u,r):0===a&&0===n?i.selection.get(n+c-1,a+f-1):0===a?-i.selection.get(t,a+f-1)+i.selection.get(n+c-1,a+f-1):-i.selection.get(u,o)+i.selection.get(u,r)}},{}],27:[function(n,a,c){"use strict";var f=n("./area-sum");a.exports=function(n,a,c,i,o){return f(n,a,c,i,o)/(c*i)}},{"./area-sum":26}],28:[function(n,a,c){(function(c){"use strict";var f=n("path"),i=n("./read"),o=f.join(f.resolve(c),"../../data");
a.exports.five=function(n){return i(f.join(o,"five.png"),n)},a.exports.nodejs=function(n){return i(f.join(o,"nodejs.png"),n)},a.exports.lena=function(n){return i(f.join(o,"lena.tiff"),n)},a.exports.moon=function(n){return i(f.join(o,"moon.tiff"),n)}}).call(this,"/src/images")},{"./read":32,path:19}],29:[function(n,a,c){"use strict";var f=n("../ndarray");a.exports=function(n){return new f(n.selection.step(null,-1))}},{"../ndarray":42}],30:[function(n,a,c){"use strict";a.exports={data:n("./data"),read:n("./read"),save:n("./save"),resize:n("./resize"),sat:n("./sat"),ssat:n("./ssat"),sobel:n("./sobel"),scharr:n("./scharr"),areaSum:n("./area-sum"),areaValue:n("./area-value"),flip:n("./flip")}},{"./area-sum":26,"./area-value":27,"./data":28,"./flip":29,"./read":32,"./resize":33,"./sat":35,"./save":36,"./scharr":37,"./sobel":38,"./ssat":39}],31:[function(n,a,c){"use strict";var f=n("../ndarray"),i=n("cwise/lib/wrapper")({args:["array","array","array"],pre:{body:"{this_isgray=!0}",args:[],thisVars:["this_isgray"],localVars:[]},body:{body:"{(_inline_67_arg0_!==_inline_67_arg1_||_inline_67_arg1_!==_inline_67_arg2_)&&(this_isgray=!1)}",args:[{name:"_inline_67_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_67_arg1_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_67_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_isgray"],localVars:[]},post:{body:"{return this_isgray}",args:[],thisVars:["this_isgray"],localVars:[]},debug:!1,funcName:"doCheckIsGrayscaleCwise",blockSize:64});a.exports=function(n){n instanceof f&&(n=n.selection);var a=n.shape;return 1===a.length?!1:2===a.length||3===a.length&&1===a[2]?!0:3!==a.length||3!==a[2]&&4!==a[2]?!1:i(n.pick(null,null,0),n.pick(null,null,1),n.pick(null,null,2))}},{"../ndarray":42,"cwise/lib/wrapper":8}],32:[function(n,a,c){(function(c){"use strict";function f(n,a){var c=n.getContext("2d"),f=c.getImageData(0,0,n.width,n.height),i=[n.width,n.height,4],u=[4,4*n.width,1],v=o(new Uint8Array(f.data),i,u,0),X=v.transpose(1,0);t(X)&&(X=X.pick(null,null,0)),a(null,new r(X))}function i(n,a){var c=document.createElement("canvas");c.width=n.width,c.height=n.height;var f=c.getContext("2d");f.drawImage(n,0,0);var i=f.getImageData(0,0,n.width,n.height),u=[n.width,n.height,4],v=[4,4*n.width,1],X=o(new Uint8Array(i.data),u,v,0),b=X.transpose(1,0);t(b)&&(b=b.pick(null,null,0)),a(null,new r(b))}var o=(n("./utils"),n("ndarray")),r=n("../ndarray"),t=n("./is-grayscale");a.exports=function(n,a,o){if(2===arguments.length&&(o=a,a="input"),c.isBuffer(n)&&(n="data:image/png;base64,"+n.toString("base64")),n instanceof HTMLImageElement)return i(n,o);if(n instanceof HTMLCanvasElement)return f(n,o);var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){i(r,o)},r.onerror=function(n){o(n)},r.src=n}}).call(this,{isBuffer:n("../../node_modules/is-buffer/index.js")})},{"../../node_modules/is-buffer/index.js":12,"../ndarray":42,"./is-grayscale":31,"./utils":40,ndarray:18}],33:[function(n,a,c){"use strict";var f=n("./utils"),i=n("ndarray"),o=n("../ndarray");a.exports=function(n,a,c,r){var t=n.shape,u=t[0],v=t[1],X=t[2]||1,b=document.createElement("canvas");b.height=u,b.width=v;var d=b.getContext("2d"),e=d.createImageData(v,u),g=f.setRawData(n.selection,e.data);if(g)return r(g);var h=u/a,j=v/c,k=Math.min(h,j),l=a*k,m=c*k,p=(u-k*a)/2,q=(v-k*c)/2;d.putImageData(e,0,0),d.drawImage(b,q,p,m,l,0,0,c,a);var s=d.getImageData(0,0,c,a),w=[0|c,0|a,4],x=[4,4*c|0,1],y=i(new Uint8Array(s.data),w,x,0),z=y.transpose(1,0);2===t.length?z=z.pick(null,null,0):3===t.length&&1===X&&(z=z.pick(null,null,0)),r(null,new o(z))}},{"../ndarray":42,"./utils":40,ndarray:18}],34:[function(n,a,c){"use strict";var f=n("../ndarray"),i=n("../utils"),o=n("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_70_arg0_=4899*_inline_70_arg1_+9617*_inline_70_arg2_+1868*_inline_70_arg3_+8192>>14}",args:[{name:"_inline_70_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_70_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_70_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"rgb2grayCwise",blockSize:64});a.exports=function(n){n instanceof f||(n=new f(n));var a=n.shape,c=a[0],r=a[1],t=a[2]||1;if(1===t)return n;var u=[c,r],v=new f(new Uint8Array(i.shapeSize(u)),u),X=n.selection.pick(null,null,0),b=n.selection.pick(null,null,1),d=n.selection.pick(null,null,2);return o(v.selection,X,b,d),v}},{"../ndarray":42,"../utils":43,"cwise/lib/wrapper":8}],35:[function(n,a,c){"use strict";var f=n("../ndarray"),i=n("./rgb2gray"),o=n("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_55_arg0_=0!==_inline_55_arg2_[0]&&0!==_inline_55_arg2_[1]?_inline_55_arg1_+_inline_55_arg4_+_inline_55_arg5_-_inline_55_arg3_:0===_inline_55_arg2_[0]&&0===_inline_55_arg2_[1]?_inline_55_arg1_:0===_inline_55_arg2_[0]?_inline_55_arg1_+_inline_55_arg5_:_inline_55_arg1_+_inline_55_arg4_}",args:[{name:"_inline_55_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_55_arg1_",lvalue:!1,rvalue:!0,count:4},{name:"_inline_55_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_55_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_55_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});a.exports=function(n){var a=i(n),c=a.shape,r=c[0],t=c[1],u=new f(new Uint32Array(r*t),[r,t]);return o(u.selection,a.selection),u}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],36:[function(n,a,c){"use strict";var f=n("./utils");n("../ndarray");a.exports=function(n,a,c){c=c||function(){};var i=n.shape,o=i[0],r=i[1];if(a instanceof HTMLCanvasElement){var t=document.createElement("canvas"),u=t.getContext("2d"),v=u.createImageData(r,o),X=f.setRawData(n.selection,v.data);return X?c(X):(u.putImageData(v,0,0),u.drawImage(t,r,o),a.getContext("2d").drawImage(t,0,0,r,o,0,0,a.width,a.height),c())}}},{"../ndarray":42,"./utils":40}],37:[function(n,a,c){"use strict";var f=n("ndarray-ops"),i=n("../ndarray"),o=n("../utils"),r=n("./rgb2gray"),t=n("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_61_q=3*_inline_61_arg2_+10*_inline_61_arg3_+3*_inline_61_arg4_-3*_inline_61_arg7_-10*_inline_61_arg8_-3*_inline_61_arg9_,_inline_61_s=3*_inline_61_arg2_-3*_inline_61_arg4_+10*_inline_61_arg5_-10*_inline_61_arg6_+3*_inline_61_arg7_-3*_inline_61_arg9_;_inline_61_arg0_=Math.sqrt(_inline_61_s*_inline_61_s+_inline_61_q*_inline_61_q)}",args:[{name:"_inline_61_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_61_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_61_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_61_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_61_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_61_q","_inline_61_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});a.exports=function(n){var a=r(n),c=a.shape,u=c[0],v=c[1],X=new i(new Float32Array(o.shapeSize(c)),c);return t(X.selection,a.selection),f.assigns(X.selection.pick(0,null),0),f.assigns(X.selection.pick(null,0),0),f.assigns(X.selection.pick(u-1,null),0),f.assigns(X.selection.pick(null,v-1),0),X.divide(16*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],38:[function(n,a,c){"use strict";var f=n("ndarray-ops"),i=n("../ndarray"),o=n("../utils"),r=n("./rgb2gray"),t=n("cwise/lib/wrapper")({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_58_q=_inline_58_arg2_+2*_inline_58_arg3_+_inline_58_arg4_-_inline_58_arg7_-2*_inline_58_arg8_-_inline_58_arg9_,_inline_58_s=_inline_58_arg2_-_inline_58_arg4_+2*_inline_58_arg5_-2*_inline_58_arg6_+_inline_58_arg7_-_inline_58_arg9_;_inline_58_arg0_=Math.sqrt(_inline_58_s*_inline_58_s+_inline_58_q*_inline_58_q)}",args:[{name:"_inline_58_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_58_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_58_arg2_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_58_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_58_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg6_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg7_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_58_arg8_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_58_arg9_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:["_inline_58_q","_inline_58_s"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doSobelBody",blockSize:64});a.exports=function(n){var a=r(n),c=a.shape,u=c[0],v=c[1],X=new i(new Float32Array(o.shapeSize(c)),c);return t(X.selection,a.selection),f.assigns(X.selection.pick(0,null),0),f.assigns(X.selection.pick(null,0),0),f.assigns(X.selection.pick(u-1,null),0),f.assigns(X.selection.pick(null,v-1),0),X.divide(4*Math.sqrt(2),!1)}},{"../ndarray":42,"../utils":43,"./rgb2gray":34,"cwise/lib/wrapper":8,"ndarray-ops":17}],39:[function(n,a,c){"use strict";var f=n("../ndarray"),i=n("./rgb2gray"),o=n("cwise/lib/wrapper")({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_64_arg0_=0!==_inline_64_arg2_[0]&&0!==_inline_64_arg2_[1]?_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg4_+_inline_64_arg5_-_inline_64_arg3_:0===_inline_64_arg2_[0]&&0===_inline_64_arg2_[1]?_inline_64_arg1_*_inline_64_arg1_:0===_inline_64_arg2_[0]?_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg5_:_inline_64_arg1_*_inline_64_arg1_+_inline_64_arg4_}",args:[{name:"_inline_64_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_64_arg1_",lvalue:!1,rvalue:!0,count:8},{name:"_inline_64_arg2_",lvalue:!1,rvalue:!0,count:5},{name:"_inline_64_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_64_arg4_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_64_arg5_",lvalue:!1,rvalue:!0,count:2}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"doIntegrateBody",blockSize:64});a.exports=function(n){var a=i(n),c=a.shape,r=c[0],t=c[1],u=new f(new Uint32Array(r*t),[r,t]);return o(u.selection,a.selection),u}},{"../ndarray":42,"./rgb2gray":34,"cwise/lib/wrapper":8}],40:[function(n,a,c){"use strict";var f=n("../ndarray");a.exports.getRawData=function(n){n instanceof f&&(n=n.selection);var a,c,i=0,o=n.shape,r=o[0],t=o[1],u=o[2]||1,v=new Uint8Array(r*t*u);if(3===n.shape.length)if(3===u)for(a=0;r>a;++a)for(c=0;t>c;++c)v[i++]=n.get(a,c,0),v[i++]=n.get(a,c,1),v[i++]=n.get(a,c,2);else if(4===u)for(a=0;r>a;++a)for(c=0;t>c;++c)v[i++]=n.get(a,c,0),v[i++]=n.get(a,c,1),v[i++]=n.get(a,c,2),v[i++]=n.get(a,c,3);else{if(1!==u)return new Error("Incompatible array shape");for(a=0;r>a;++a)for(c=0;t>c;++c)v[i++]=n.get(a,c,0)}else{if(2!==n.shape.length)return new Error("Invalid image");for(a=0;r>a;++a)for(c=0;t>c;++c)v[i++]=n.get(a,c)}return v},a.exports.setRawData=function(n,a){var c,f,i,o=0,r=n.shape[0],t=n.shape[1],u=n.shape[2]||1;if(3===n.shape.length)if(3===u)for(c=0;r>c;++c)for(f=0;t>f;++f)a[o++]=n.get(c,f,0),a[o++]=n.get(c,f,1),a[o++]=n.get(c,f,2),a[o++]=255;else if(4===u)for(c=0;r>c;++c)for(f=0;t>f;++f)a[o++]=n.get(c,f,0),a[o++]=n.get(c,f,1),a[o++]=n.get(c,f,2),a[o++]=n.get(c,f,3);else{if(1!==u)return new Error("Incompatible array shape");for(c=0;r>c;++c)for(f=0;t>f;++f)i=n.get(c,f,0),a[o++]=i,a[o++]=i,a[o++]=i,a[o++]=255}else{if(2!==n.shape.length)return new Error("Invalid image");for(c=0;r>c;++c)for(f=0;t>f;++f)i=n.get(c,f),a[o++]=i,a[o++]=i,a[o++]=i,a[o++]=255}}},{"../ndarray":42}],41:[function(n,a,c){"use strict";function f(n,a){if(0!==n.length&&0!==a.length){for(var c=n.slice().reverse(),f=a.slice().reverse(),i=Math.max(n.length,a.length),o=new Array(i),r=0;i>r;r++)if(c[r]&&1!==c[r])if(f[r]&&1!==f[r]){if(c[r]!==f[r])return;o[r]=c[r]}else o[r]=c[r];else o[r]=f[r];return o.reverse()}}function i(n,a){return W["new"](n).add(a)}function o(n,a){return W["new"](n).multiply(a)}function r(n,a){return W["new"](n).divide(a)}function t(n,a){return W["new"](n).subtract(a)}function u(n,a){return W["new"](n).equal(a)}function v(n){return W["new"](n).flatten()}function X(n,a){return W["new"](n).reshape(a)}function b(n){return W["new"](n).exp()}function d(n){return W["new"](n).sqrt()}function e(n,a){return W["new"](n).pow(a)}function g(n){return W["new"](n).sum()}function h(n){return W["new"](n).mean()}function j(n){return W["new"](n).std()}function k(n){return W["new"](n).min()}function l(n){return W["new"](n).max()}function m(n,a){return W["new"](n).transpose(a)}function p(n){return W["new"](n).negative()}function q(n,a,c,f){1===arguments.length?(a=n,n=0,c=1):2===arguments.length&&Y.isNumber(a)?c=1:2===arguments.length?(f=a,a=n,n=0,c=1):3!==arguments.length||Y.isNumber(c)||(f=c,c=1);for(var i=[],o=0;a>n;)i[o++]=n,n+=c;return W["new"](i,f)}function s(n,a){Y.isNumber(n)&&n>=0&&(n=[n]);var c=Y.shapeSize(n),f=Y.getType(a),i=new W(new f(c),n);return R.assigns(i.selection,0),i}function w(n,a){Y.isNumber(n)&&n>=0&&(n=[n]);var c=Y.shapeSize(n),f=Y.getType(a),i=new W(new f(c),n);return R.assigns(i.selection,1),i}function x(n){if(0===arguments.length)return W["new"](Math.random());n=1===arguments.length?Y.isNumber(n)?[0|n]:n:arguments;var a=Y.shapeSize(n),c=new W(new Array(a),n);return R.random(c.selection),c}function y(n){var a=W["new"](n).exp(),c=a.sum();return R.divseq(a.selection,c),a}function z(n,a){return n=W["new"](n).clone(),a=a||1,$(n.selection,a),n}function A(n,a,c){1===arguments.length?(a=0,c=1):2===arguments.length&&(c=1);var f=n instanceof W?n.clone():W["new"](n);return _(f.selection,a,c),f}function B(n,a){a=a||.001;var c=n instanceof W?n.clone():W["new"](n);return nn(c.selection,a),c}function C(n){var a=n instanceof W?n.clone():W["new"](n);return an(a.selection),a}function D(n){var a=n instanceof W?n.clone():W["new"](n);return R.abseq(a.selection),a}function E(n){var a=n instanceof W?n.clone():W["new"](n);return R.coseq(a.selection),a}function F(n){var a=n instanceof W?n.clone():W["new"](n);return R.acoseq(a.selection),a}function G(n){var a=n instanceof W?n.clone():W["new"](n);return R.sineq(a.selection),a}function H(n){var a=n instanceof W?n.clone():W["new"](n);return R.asineq(a.selection),a}function I(n){var a=n instanceof W?n.clone():W["new"](n);return R.taneq(a.selection),a}function J(n){var a=n instanceof W?n.clone():W["new"](n);return R.ataneq(a.selection),a}function K(n,a){n=W["new"](n),a=W["new"](a);var c,f,i=n.shape,o=a.shape,r=Y.getType(n.dtype);if(2===i.length&&2===o.length&&i[1]===o[0])return c=[i[0],o[1]],f=new W(new r(Y.shapeSize(c)),c),S(f.selection,n.selection,a.selection),f;if(1===i.length&&2===o.length&&i[0]===o[0])return K(n.reshape([i[0],1]).transpose(),a).reshape(o[1]);if(2===i.length&&1===o.length&&i[1]===o[0])return K(n,a.reshape([o[0],1])).reshape(i[0]);if(1===i.length&&1===o.length&&i[0]===o[0])return K(n.reshape([i[0],1]).transpose(),a.reshape([o[0],1])).reshape([1]);throw new Z.ValueError("cannot compute the matrix product of given arrays")}function L(n){arguments.length>1&&(n=[].slice.call(arguments));var a,c;for(a=0;a<n.length;a++)c=n[a],n[a]=c instanceof W?c.tolist():Y.isNumber(c)?[c]:c;var f=n[0];for(a=1;a<n.length;a++){c=n[a];var i=Y.getShape(f),o=Y.getShape(c);if(i.length!==o.length)throw new Z.ValueError("all the input arrays must have same number of dimensions");if(1===i.length&&1===o.length)f=f.concat(c);else if(2===i.length&&2===o.length&&i[0]===o[0]||1===i.length&&2===o.length&&i[0]===o[0]||2===i.length&&1===o.length&&i[0]===o[0])for(var r=0;r<i[0];r++)f[r]=f[r].concat(c[r]);else{if(!(3===i.length&&3===o.length&&i[0]===o[0]&&i[1]===o[1]||2===i.length&&3===o.length&&i[0]===o[0]&&i[1]===o[1]||3===i.length&&2===o.length&&i[0]===o[0]&&i[1]===o[1]))throw new Z.ValueError('cannot concatenate  "'+i+'" with "'+o+'"');for(var t=0;t<i[0];t++){for(var u=new Array(i[1]),v=0;v<i[1];v++)u[v]=f[t][v].concat(c[t][v]);f[t]=u}}}return W["new"](f,n[0].dtype)}function M(n){return W["new"](n).round()}function N(n,a){return W["new"](n).convolve(a)}function O(n){n=n instanceof W?n.clone():W["new"](n);var a=n.shape,c=a.length;if(2!==a[c-1])throw new Z.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var f=new Array(c),i=new Array(c);return f[c-1]=0,i[c-1]=1,T(1,n.selection.pick.apply(n.selection,f),n.selection.pick.apply(n.selection,i)),n}function P(n){n=n instanceof W?n.clone():W["new"](n);var a=n.shape,c=a.length;if(2!==a[c-1])throw new Z.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var f=new Array(c),i=new Array(c);return f[c-1]=0,i[c-1]=1,T(-1,n.selection.pick.apply(n.selection,f),n.selection.pick.apply(n.selection,i)),n}var Q=n("ndarray"),R=n("ndarray-ops"),S=n("ndarray-gemm"),T=n("ndarray-fft"),U=n("./config"),V=n("./dtypes"),W=n("./ndarray"),Y=n("./utils"),Z=n("./errors"),$=n("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_37_arg0_=-30>_inline_37_arg0_?0:_inline_37_arg0_>30?1:1/(1+Math.exp(-1*_inline_37_arg1_*_inline_37_arg0_))}",args:[{name:"_inline_37_arg0_",lvalue:!0,rvalue:!0,count:4},{name:"_inline_37_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"sigmoidCwise",blockSize:64}),_=n("cwise/lib/wrapper")({args:["array","scalar","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_40_arg0_=Math.min(Math.max(_inline_40_arg1_,_inline_40_arg0_),_inline_40_arg2_)}",args:[{name:"_inline_40_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_40_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_40_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"clipCwise",blockSize:64}),nn=n("cwise/lib/wrapper")({args:["array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_43_arg0_=Math.max(_inline_43_arg1_*_inline_43_arg0_,_inline_43_arg0_)}",args:[{name:"_inline_43_arg0_",lvalue:!0,rvalue:!0,count:3},{name:"_inline_43_arg1_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"leakyReluCwise",blockSize:64}),an=n("cwise/lib/wrapper")({args:["array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_46_arg0_=(Math.exp(2*_inline_46_arg0_)-1)/(Math.exp(2*_inline_46_arg0_)+1)}",args:[{name:"_inline_46_arg0_",lvalue:!0,rvalue:!0,count:3}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"tanhCwise",blockSize:64});a.exports={config:U,dtypes:V,NdArray:W,ndarray:Q,array:W["new"],arange:q,reshape:X,zeros:s,ones:w,flatten:v,random:x,softmax:y,sigmoid:z,leakyRelu:B,abs:D,arccos:F,arcsin:H,arctan:J,cos:E,sin:G,tan:I,tanh:C,clip:A,exp:b,sqrt:d,power:e,sum:g,mean:h,std:j,dot:K,add:i,subtract:t,multiply:o,divide:r,negative:p,equal:u,max:l,min:k,concatenate:L,transpose:m,errors:Z,broadcast:f,round:M,convolve:N,fft:O,ifft:P,int8:function(n){return W["new"](n,V.int8)},uint8:function(n){return W["new"](n,V.uint8)},int16:function(n){return W["new"](n,V.int16)},uint16:function(n){return W["new"](n,V.uint16)},int32:function(n){return W["new"](n,V.int32)},uint32:function(n){return W["new"](n,V.uint32)},float32:function(n){return W["new"](n,V.float32)},float64:function(n){return W["new"](n,V.float64)},images:n("./images")}},{"./config":23,"./dtypes":24,"./errors":25,"./images":30,"./ndarray":42,"./utils":43,"cwise/lib/wrapper":8,ndarray:18,"ndarray-fft":13,"ndarray-gemm":15,"ndarray-ops":17}],42:[function(n,a,c){"use strict";function f(n,a){if(n instanceof h)return n;var c=g.getType(a);if(g.isNumber(n))return c!==Array?new h(new c([n]),[1]):new h([n],[1]);var f=g.getShape(n);return f.length>1&&(n=g.flatten(n,!0)),n instanceof c||(n=new c(n)),new h(n,f)}function i(n,a){a=a||0;var c=0|n[a];if(0>=c)return[];var f,o=new Array(c);if(a===n.length-1)for(f=0;c>f;++f)o[f]=0;else for(f=0;c>f;++f)o[f]=i(n,a+1);return o}function o(n){var a=i(n.shape,0);return k(n,a),a}function r(n){return String(Number((n||0).toFixed(d.nFloatingValues)))}var t=n("iota-array"),u=n("ndarray"),v=n("ndarray-ops"),X=(n("ndarray-gemm"),n("ndarray-fft")),b=n("typedarray-pool"),d=n("./config"),e=n("./errors"),g=n("./utils"),h=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new e.ValueError("Required argument 'data' not found");this.selection=u.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(n){var a=g.getType(n);this.selection=u(new a(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset)}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};h.prototype.get=function(){return this.selection.get.apply(this.selection,arguments)},h.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},h.prototype.pick=function(n){return new h(this.selection.pick.apply(this.selection,arguments))},h.prototype.lo=function(){return new h(this.selection.lo.apply(this.selection,arguments))},h.prototype.hi=function(){return new h(this.selection.hi.apply(this.selection,arguments))},h.prototype.step=function(){return new h(this.selection.step.apply(this.selection,arguments))},h.prototype.flatten=function(){if(1===this.shape.length)return new h(this.selection);var n=g.getType(this.dtype),a=g.flatten(this.tolist(),!0);return a instanceof n||(a=new n(a)),new h(a,[this.size])},h.prototype.reshape=function(n){if(0===arguments.length)throw new e.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&g.isNumber(n)&&(n=[n]),arguments.length>1&&(n=arguments),this.size!==g.shapeSize(n))throw new e.ValueError("total size of new array must be unchanged");var a,c,f,i,o=this.selection.shape,r=this.selection.offset,t=this.selection.stride,u=o.length,v=n.length;if(u===v){var X=!0;for(f=0;v>f;++f)if(o[f]!==n[f]){X=!1;break}if(X)return new h(this.selection.data,o,t,r)}else if(1===u){for(a=new Array(v),f=v-1,i=1;f>=0;--f)a[f]=i,i*=n[f];for(c=r,f=0;v>f;++f)a[f]<0&&(c-=(n[f]-1)*a[f]);return new h(this.selection.data,n,a,c)}var b=Math.min(u,v),d=!0;for(f=0;b>f;f++)if(o[f]!==n[f]){d=!1;break}if(d){for(a=new Array(v),f=0;v>f;f++)a[f]=t[f]||1;return c=r,new h(this.selection.data,n,a,c)}return this.flatten().reshape(n)},h.prototype.transpose=function(n){return 0===arguments.length?n=t(this.shape.length).reverse():arguments.length>1&&(n=arguments),new h(this.selection.transpose.apply(this.selection,n))},h.prototype.add=function(n,a){1===arguments.length&&(a=!0);var c=a?this.clone():this;return g.isNumber(n)?(v.addseq(c.selection,n),c):(n=f(n,this.dtype),v.addeq(c.selection,n.selection),c)},h.prototype.subtract=function(n,a){1===arguments.length&&(a=!0);var c=a?this.clone():this;return g.isNumber(n)?(v.subseq(c.selection,n),c):(n=f(n,this.dtype),v.subeq(c.selection,n.selection),c)},h.prototype.multiply=function(n,a){1===arguments.length&&(a=!0);var c=a?this.clone():this;return g.isNumber(n)?(v.mulseq(c.selection,n),c):(n=f(n,this.dtype),v.muleq(c.selection,n.selection),c)},h.prototype.divide=function(n,a){1===arguments.length&&(a=!0);var c=a?this.clone():this;return g.isNumber(n)?(v.divseq(c.selection,n),c):(n=f(n,this.dtype),v.diveq(c.selection,n.selection),c)},h.prototype.pow=function(n,a){1===arguments.length&&(a=!0);var c=a?this.clone():this;return g.isNumber(n)?(v.powseq(c.selection,n),c):(n=f(n,this.dtype),v.poweq(c.selection,n.selection),c)},h.prototype.exp=function(n){0===arguments.length&&(n=!0);var a=n?this.clone():this;return v.expeq(a.selection),a},h.prototype.sqrt=function(n){0===arguments.length&&(n=!0);var a=n?this.clone():this;return v.sqrteq(a.selection),a},h.prototype.max=function(){return 0===this.selection.size?null:v.sup(this.selection)},h.prototype.min=function(){return 0===this.selection.size?null:v.inf(this.selection)},h.prototype.sum=function(){return v.sum(this.selection)},h.prototype.std=function(){var n=this.clone();v.powseq(n.selection,2);var a=this.mean(),c=Math.abs(v.sum(n.selection)/g.shapeSize(this.shape)-a*a);return c>0?Math.sqrt(c):0},h.prototype.mean=function(){return v.sum(this.selection)/g.shapeSize(this.shape)},h.prototype.tolist=function(){return o(this.selection)},h.prototype.valueOf=function(){return this.tolist()},h.prototype.toString=function(){function n(c,f){if(g.isString(f))return f;if(g.isNumber(f)){var i=r(f);return new Array(Math.max(0,a-i.length+2)).join(" ")+i}c=c||0;var o,t=d.printThreshold,u=t/2|0;return o=f.length>t?[].concat(f.slice(0,u),[" ..."],f.slice(f.length-u)):f,new Array(c+1).join(" ")+"["+o.map(function(a,f){return n(0===f&&0===c?1:c+1,a)}).join(",")+"]"}var a=r(this.max()).length,c=/\]\,(\s*)\[/g,f="],\n$1      [",i=/\]\,(\s+)...\,(\s+)\[/g,o="],\n$2       ...\n$2      [",t=/\[\s+\[/g,u="[[",v=JSON.stringify(this.tolist(),n).replace(c,f).replace(t,u).replace(t,u).replace(i,o).slice(2,-1);switch(this.dtype){case"array":return"array(["+v+")";default:return"array(["+v+", dtype="+this.dtype+")"}},h.prototype.inspect=h.prototype.toString,h.prototype.toJSON=function(){return JSON.stringify(this.tolist())},h.prototype.clone=function(){var n=this.selection;return new h(u(n.data.slice(),n.shape,n.stride,n.offset))},h.prototype.equal=function(n){if(n=f(n),this.size!==n.size||this.ndim!==n.ndim)return!1;for(var a=this.ndim,c=0;a>c;c++)if(this.shape[c]!==n.shape[c])return!1;return v.all(v.eqeq(this.selection,n.selection))},h.prototype.round=function(n){0===arguments.length&&(n=!0);var a=n?this.clone():this;return v.roundeq(a.selection),a},h.prototype.negative=function(){var n=this.clone();return v.neg(n.selection,this.selection),n},h.prototype.iteraxis=function(n,a){var c=this.shape;if(-1===n&&(n=c.length-1),0>n||n>c.length-1)throw new e.ValueError("invalid axis");for(var i=0;i<c[n];i++){for(var r=new Array(n+1),t=0;n+1>t;t++)r[t]=t===n?i:null;var u=this.selection.pick.apply(this.selection,r),v=f(o(u),this.dtype);a(v,i)}};var j=n("cwise/lib/wrapper")({args:["array","array","array","array"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_49_c=_inline_49_arg2_,_inline_49_f=_inline_49_arg3_,_inline_49_i=_inline_49_arg0_,_inline_49_o=_inline_49_arg1_,_inline_49_t=_inline_49_i*(_inline_49_c+_inline_49_f);_inline_49_arg0_=_inline_49_t-_inline_49_f*(_inline_49_i+_inline_49_o),_inline_49_arg1_=_inline_49_t+_inline_49_c*(_inline_49_o-_inline_49_i)}",args:[{name:"_inline_49_arg0_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_49_arg1_",lvalue:!0,rvalue:!0,count:2},{name:"_inline_49_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_49_c","_inline_49_f","_inline_49_i","_inline_49_o","_inline_49_t"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});h.prototype.convolve=function(n){if(n=h["new"](n),this.ndim!==n.ndim)throw new e.ValueError("arrays must have the same dimensions");var a,c=this.selection,f=n.selection,i=this.ndim,o=1,r=new Array(i),t=new Array(i),d=new Array(i);for(a=i-1;a>=0;--a)t[a]=c.shape[a],r[a]=o,o*=t[a],d[a]=c.shape[a]-f.shape[a]+1;var k=g.getType(c.dtype),l=new h(new k(g.shapeSize(d)),d),m=l.selection,p=b.mallocDouble(o),q=u(p,t,r,0);v.assigns(q,0),v.assign(q.hi.apply(q,c.shape),c);var s=b.mallocDouble(o),w=u(s,t,r,0);v.assigns(w,0),X(1,q,w);var x=b.mallocDouble(o),y=u(x,t,r,0);v.assigns(y,0),v.assign(y.hi.apply(y,f.shape),f);var z=b.mallocDouble(o),A=u(z,t,r,0);v.assigns(A,0),X(1,y,A),j(q,w,y,A),X(-1,q,w);var B=new Array(i),C=new Array(i),D=!1;for(a=0;i>a;++a)m.shape[a]>t[a]&&(D=!0),C[a]=+f.shape[a]-1,B[a]=Math.min(m.shape[a],t[a]-C[a]);var E;return D&&v.assign(m,0),E=q.lo.apply(q,C),E=E.hi.apply(E,B),v.assign(m.hi.apply(m,B),E),b.freeDouble(p),b.freeDouble(s),b.freeDouble(x),b.freeDouble(z),l},h["new"]=f,a.exports=h;var k=n("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_52_a,_inline_52_e=_inline_52_arg1_;for(_inline_52_a=0;_inline_52_a<_inline_52_arg2_.length-1;++_inline_52_a)_inline_52_e=_inline_52_e[_inline_52_arg2_[_inline_52_a]];_inline_52_e[_inline_52_arg2_[_inline_52_arg2_.length-1]]=_inline_52_arg0_}",args:[{name:"_inline_52_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_52_a","_inline_52_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64})},{"./config":23,"./errors":25,"./utils":43,"cwise/lib/wrapper":8,"iota-array":11,ndarray:18,"ndarray-fft":13,"ndarray-gemm":15,"ndarray-ops":17,"typedarray-pool":21}],43:[function(n,a,c){"use strict";function f(n){return"number"==typeof n}function i(n){return"string"==typeof n}function o(n){return"function"==typeof n}function r(n,a,c){c=c||[];for(var i=-1,o=n.length;++i<o;){var t=n[i];f(t)?c[c.length]=t:a?r(t,a,c):c.push(t)}return c}function t(n){for(var a=1,c=0;c<n.length;c++)a*=n[c];return a}function u(n){return o(n)?n:b[n]||Array}function v(n){for(var a=[];"object"==typeof n;)a.push(n.length),n=n[0];return a}function X(n){var a,c;return"object"==typeof n?(a=n[0],"object"==typeof a?(c=a[0],"object"==typeof c?v(n):[n.length,a.length]):[n.length]):[]}var b=n("./dtypes");a.exports={isNumber:f,isString:i,isFunction:o,flatten:r,shapeSize:t,getType:u,getShape:X}},{"./dtypes":24}]},{},[41])(41)});